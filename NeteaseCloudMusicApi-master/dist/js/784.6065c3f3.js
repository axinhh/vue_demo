"use strict";(self["webpackChunkxx_music"]=self["webpackChunkxx_music"]||[]).push([[784],{269:function(e,t,n){n.d(t,{b:function(){return a},t:function(){return o}});var l=n(991);let r=[],i=[];function a(e){for(let t=0;t<e.length;t++)i.push(new Promise(((n,l)=>{s(e[t],n)})));return Promise.all(i).then((()=>(r.sort(((e,t)=>e.tag.charCodeAt()-t.tag.charCodeAt())),r.unshift(r.pop()),r)))}function s(e,t){"热"===e?(0,l.U)("/top/artists",{limit:30}).then((n=>{r.push({tag:e,nameArr:n.artists}),t()})):(0,l.U)("/artist/list",{initial:e,type:-1,area:7}).then((n=>{r.push({tag:e,nameArr:n.artists}),t()}))}function o(e){return(0,l.U)("/artists",{id:e.id})}},7784:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var l=n(6252),r=n(2262),i=n(9963),a=n(269),s=n(3577),o=n(14);function u(e){const t=(0,r.iH)(0),n=(0,r.iH)([]),i=(0,r.iH)(null),a=(0,r.iH)(0),s=(0,r.iH)(0),o=e=>{t.value=-e.y},u=(0,l.Fl)((()=>t.value<0?"":e.singerList[a.value]?e.singerList[a.value].tag:"")),c=(0,l.Fl)((()=>{let e=0;return s.value>=0&&s.value<30&&(e=30-s.value),{transform:`translate(0,-${e}px)`}}));function g(){const r=i.value.children,o=n.value;let u=0;o.length=0,o.push(u),(0,l.YP)((()=>e.singerList),(async e=>{await(0,l.Y3)((()=>{g()}))})),(0,l.YP)((()=>t.value),(e=>{for(let n=0;n<o.length;n++){let l=o[n],r=o[n+1];t.value>=l&&t.value<r&&(a.value=n,s.value=r-e)}}));for(let e=0;e<r.length;e++)u+=r[e].clientHeight,o.push(u)}return(0,l.bv)((()=>{g()})),{onScroll:o,rootRef:i,fixedTitle:u,fixedStyle:c,currentIndex:a}}function c(e){const t=(0,r.iH)(null),n={};function l(e){const t=+e.target.dataset.index;n.startI=t,a(t),n.y1=e.touches[0].pageY}function i(e){n.y2=e.touches[0].pageY;const t=Math.floor((n.y2-n.y1)/18),l=Math.max(0,Math.min(26,n.startI+t));a(l)}function a(n){const l=t.value.scroll,r=e.value.children[n];l.scrollToElement(r)}return{scrollRef:t,onShortcutTouchStart:l,onShortcutTouchMove:i}}const g={class:"title"},f=["onClick"],v={class:"avatar"},h={alt:""},p={class:"name"},d={class:"fixed-title"},m={class:"shortcut"},S=["data-index"];var w={name:"index",props:["singerList","arrStrUppercase"],emits:["select"],setup(e,{emit:t}){const n=e,{onScroll:a,rootRef:w,fixedTitle:U,fixedStyle:y,currentIndex:_}=u(n),{onShortcutTouchStart:x,scrollRef:L,onShortcutTouchMove:H}=((0,r.iH)(!0),c(w));function k(e){t("select",e)}return(t,n)=>{const u=(0,l.Q2)("img-lazy");return(0,l.wg)(),(0,l.j4)((0,r.SU)(o.Z),{class:"singer-list",onScroll:(0,r.SU)(a),probeType:3,ref_key:"scrollRef",ref:L},{default:(0,l.w5)((()=>[(0,l._)("ul",{class:"view-scroll",ref_key:"rootRef",ref:w},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.singerList,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"group",key:e.tag},[(0,l._)("h2",g,(0,s.zw)(e.tag),1),(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.nameArr,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"item",key:e.id,onClick:t=>k(e)},[(0,l._)("div",v,[(0,l.wy)((0,l._)("img",h,null,512),[[u,e.picUrl]])]),(0,l._)("span",p,(0,s.zw)(e.name),1)],8,f)))),128))])])))),128))],512),(0,l.wy)((0,l._)("div",{class:"fixed",style:(0,s.j5)((0,r.SU)(y))},[(0,l._)("div",d,(0,s.zw)((0,r.SU)(U)),1)],4),[[i.F8,(0,r.SU)(U)]]),(0,l._)("div",m,[(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.arrStrUppercase,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{class:(0,s.C_)(["item",{current:t===(0,r.SU)(_)}]),key:t,onTouchstart:n[0]||(n[0]=(...e)=>(0,r.SU)(x)&&(0,r.SU)(x)(...e)),"data-index":t,onTouchmove:n[1]||(n[1]=(0,i.iM)(((...e)=>(0,r.SU)(H)&&(0,r.SU)(H)(...e)),["prevent","stop"]))},(0,s.zw)(e),43,S)))),128))])])])),_:1},8,["onScroll"])}}},U=n(3744);const y=(0,U.Z)(w,[["__scopeId","data-v-53d36d08"]]);var _=y,x=n(50),L=n(2119);const H={class:"singer"};var k={name:"Singer",setup(e){const t=(0,r.iH)([]),n=(0,l.Fl)((()=>{let e=["热"];for(let t=65;t<=90;t++)e.push(String.fromCharCode(t));return e})),s=(0,l.Fl)((()=>!t.value.length)),o=(0,L.tv)(),u=(0,r.iH)({});function c(e){u.value={name:e.name,id:e.id,picUrl:e.picUrl},o.push({path:`/singer/${e.id}`})}return(0,l.bv)((async()=>{0===x.Z.getLocal("singerList",[]).length?(t.value=await(0,a.b)(n.value),x.Z.setLocal("singerList",t.value)):t.value=x.Z.getLocal("singerList")})),(e,a)=>{const o=(0,l.up)("router-view"),g=(0,l.Q2)("loading");return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",H,[(0,l.Wm)(_,{singerList:t.value,arrStrUppercase:(0,r.SU)(n),onSelect:c},null,8,["singerList","arrStrUppercase"]),(0,l.Wm)(o,null,{default:(0,l.w5)((({Component:e})=>[(0,l.Wm)(i.uT,{name:"slide",appear:""},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(e),{singerDetail:u.value},null,8,["singerDetail"]))])),_:2},1024)])),_:1})])),[[g,(0,r.SU)(s)]])}}};const T=k;var C=T}}]);